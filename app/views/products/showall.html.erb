<!-- Portfolio Grid-->
<section class="page-section bg-light" id="portfolio">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase" id="available_photos">Available Photos</h2>
            <h3 class="section-subheading text-muted">All our photos :</h3>
        </div>
        <div class="row">
            <% Product.all.each do |item| %> <!-- itérer sur chaque produit -->
                <div class="col-lg-4 col-sm-6 mb-4">
                    <div class="portfolio-item">

                        <%= link_to product_path(item), class: 'portfolio-link' do %>               
                            <div class="portfolio-hover">
                                <div class="portfolio-hover-content"><i class="fa-solid fa-magnifying-glass fa-3x"></i></div>
                            </div>
                            <%= image_tag(item.image, alt: item.name, class: 'img-fluid', style: 'height:300px;width:100%;') %>
                        <% end %>

                        <div class="portfolio-caption">
                            <div class="portfolio-caption-heading"><%= item.name %></div>
                            <div class="portfolio-caption-subheading text-muted"><%= item.price %> €</div>
                            <% if user_signed_in? %> <!-- Vérifier si l'utilisateur est connecté -->
                                <%= button_to 'Add to cart', add_to_cart_path(item.id), method: :post, class: 'btn btn-primary add_to_cart_button', remote: true %>
                            <% end %>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    </div>
</section>
